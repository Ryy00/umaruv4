const e=require("../utils"),r=require("npmlog");module.exports=function(n,t,o){return function(t,i,a,c){let s=function(){},h=function(){};const u=new Promise((function(e,r){s=e,h=r}));return c||(c=function(e){if(e)return h(e);s()}),n.post("https://www.facebook.com/messaging/save_thread_nickname/?source=thread_settings&dpr=1",o.jar,{nickname:t,participant_id:a,thread_or_other_fbid:i}).then(e.parseAndCheckLogin(o,n)).then((function(e){if(1545014===e.error)throw{error:"Trying to change nickname of user isn't in thread"};if(1357031===e.error)throw{error:"Trying to change user nickname of a thread that doesn't exist. Have at least one message in the thread before trying to change the user nickname."};if(e.error)throw e;return c()})).catch((function(e){return r.error("changeNickname",e),c(e)})),u}};