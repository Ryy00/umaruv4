const t=require("../utils"),n=require("npmlog");module.exports=function(r,e,o){return function(e,a,i,s){if("String"!==t.getType(e))throw{error:"changeAdminStatus: threadID must be a string"};if("String"===t.getType(a)&&(a=[a]),"Array"!==t.getType(a))throw{error:"changeAdminStatus: adminIDs must be an array or string"};if("Boolean"!==t.getType(i))throw{error:"changeAdminStatus: adminStatus must be a string"};let u=function(){},c=function(){};const d=new Promise((function(t,n){u=t,c=n}));if(s||(s=function(t){if(t)return c(t);u()}),"Function"!==t.getType(s)&&"AsyncFunction"!==t.getType(s))throw{error:"changeAdminStatus: callback is not a function"};const h={thread_fbid:e};let g=0;for(const t of a)h["admin_ids["+g+++"]"]=t;return h.add=i,r.post("https://www.facebook.com/messaging/save_admins/?dpr=1",o.jar,h).then(t.parseAndCheckLogin(o,r)).then((function(t){if(t.error)switch(t.error){case 1976004:throw{error:"Cannot alter admin status: you are not an admin.",rawResponse:t};case 1357031:throw{error:"Cannot alter admin status: this thread is not a group chat.",rawResponse:t};default:throw{error:"Cannot alter admin status: unknown error.",rawResponse:t}}s()})).catch((function(t){return n.error("changeAdminStatus",t),s(t)})),d}};