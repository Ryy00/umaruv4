const e=require("../utils"),r=require("npmlog"),n={0:"unknown",1:"female_singular",2:"male_singular",3:"female_singular_guess",4:"male_singular_guess",5:"mixed",6:"neuter_singular",7:"unknown_singular",8:"female_plural",9:"male_plural",10:"neuter_plural",11:"unknown_plural"};module.exports=function(t,i,u){return function(i){let a=function(){},l=function(){};const o=new Promise((function(e,r){a=e,l=r}));return i||(i=function(e,r){if(e)return l(e);a(r)}),t.postFormData("https://www.facebook.com/chat/user_info_all",u.jar,{},{viewer:u.i_userID||u.userID}).then(e.parseAndCheckLogin(u,t)).then((function(r){if(!r)throw{error:"getFriendsList returned empty object."};if(r.error)throw r;var t;i(null,(t=r.payload,Object.keys(t).map((function(r){const i=t[r];return{alternateName:i.alternateName,firstName:i.firstName,gender:n[i.gender],userID:e.formatID(i.id.toString()),isFriend:!(null==i.is_friend||!i.is_friend),fullName:i.name,profilePicture:i.thumbSrc,type:i.type,profileUrl:i.uri,vanity:i.vanity,isBirthday:!!i.is_birthday}}))))})).catch((function(e){return r.error("getFriendsList",e),i(e)})),o}};